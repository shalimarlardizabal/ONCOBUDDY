{% extends 'base.html' %}
{% include 'navbar.html' %}
{%block title %}{{user.user_name}}'s profile{% endblock %}

{% block head %}
<!-- JS Code for Charts -->
  {# ChartJS #}
  <script src="https://cdn.jsdelivr.net/npm/chart.js@3.5.1/dist/chart.min.js"></script>

  {# If you want to use time scales, you have to import a date library and the Chart.js adapter #}
  <script src="https://cdn.jsdelivr.net/npm/luxon@2.0.2/build/global/luxon.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-luxon@1.1.0/dist/chartjs-adapter-luxon.min.js"></script>

  {# randomColor: generate random colors #}
  <script src="https://cdn.jsdelivr.net/npm/randomcolor@0.6.2/randomColor.js"></script>
{% endblock %}

{%block body%}
<h1>{{user.user_name}}'s Profile</h1>

<p>See your progress below. </p>
<div class="cancer">
  <h2>Oncologic Diagnosis:</h2>

  <!-- Trigger the modal with a button -->
  {% for element in cancer%}
<button type="button" class="btn btn-info btn-lg" data-bs-toggle="modal" data-bs-target="#myModal">{{element.cancer}}</button>

<!-- Modal -->
<div id="myModal" class="modal fade" role="dialog">
  <div class="modal-dialog modal-dialog-scrollable">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-bs-dismiss="modal">&times;</button>
        <h4 class="modal-title">{{element.cancer}}</h4>
      </div>
      <div class="modal-body">
        <p>{{content[0]|safe}}</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-bs-dismiss="modal">Close</button>
      </div>
    </div>

  </div>
</div>
{%endfor%}

</div>
<div class="medications">
    <h2>current medications:</h2>
    <p>{%for medication in medications%}
    <li><a href="{{medication.description}}">{{medication.drug_name}}</a></li>
    {%endfor%}</p>

    <button id="medications">SHOW ALL MEDICATIONS</button>
</div>
<div class="symptoms">
    {%for symptom in symptoms%}
    <li>{{symptom.date}} {{symptom.symptom_name}}</li>
    {%endfor%}
</div>
<div>
    <h2>Daily Progression</h2>
    <canvas id="logchart"></canvas>
</div>



{%endblock%}

{% block js %}
  <script src="/static/js/chart.js"></script>
{% endblock %}